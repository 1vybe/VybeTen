<!DOCTYPE html>
<html>

	<head>
		<meta charset="utf-8">
		<title>Vybe</title>
	</head>

	<body>
		<div id="video_player">
			<div id="video_container">
				<video controls poster="media/1.jpg">
					<source src="media/1.mp4" type="video/mp4">
				</video>
			</div>
			<div id='playlist'>
				<a href="media/1.mp4"></a>
				<a href="media/2.mp4"></a>
				<a href="media/3.mp4"></a>
			</div>
		</div>
	</body>

	<style>
		body {
			background-color: black;
		}
		#video_player {
			margin: 0 auto;
		}
		#video_container video {
			width: 100%; height: 100%;
		}
	</style>

	<script type="text/javascript">
		var video_player = document.getElementById("video_player");
		video = video_player.getElementsByTagName("video")[0],
		video_links = document.getElementById("playlist"),
		source = video.getElementsByTagName("source"),
		link_list = [],
		path = 'media/',
		currentVid = 0,
		allLnks = video_links.children,
		lnkNum = allLnks.length;
		video.removeAttribute("controls");
		video.removeAttribute("poster");

		(function() {
			function playVid(index) {
				video_links.children[index].classList.add("currentvid");
				source[0].src = path + link_list[index] + ".mp4";
				currentVid = index;
				video.load();
				video.play();
			}

			for (var i=0; i<lnkNum; i++) {
				var filename = allLnks[i].href;
				link_list[i] = filename.match(/([^\/]+)(?=\.\w+$)/)[0];
				(function(index){
					allLnks[i].onclick = function(i){
						i.preventDefault();
						for (var i=0; i<lnkNum; i++) {
							allLnks[i].classList.remove("currentvid");
						}
						playVid(index);
					}
				})(i);
			}

			video.addEventListener('ended', function () {
				allLnks[currentVid].classList.remove("currentvid");
				if ((currentVid + 1) >= lnkNum) { nextVid = 0 } else { nextVid = currentVid+1 }
				playVid(nextVid);
			})

			allLnks[0].click();
		})()
	</script>

</html>
